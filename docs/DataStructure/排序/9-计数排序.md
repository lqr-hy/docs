# 计数排序

计数排序（Counting Sort）是一种非比较排序算法，适用于整数或可离散化的元素。它通过计算每个元素出现的次数，然后根据计数重构排序结果，从而达到排序的目的。

### 计数排序的核心思想

1. **计数数组**：

   - 创建一个计数数组，记录每个元素在原数组中出现的次数。

2. **累加计数**：

   - 将计数数组转换为累加计数数组，以便确定每个元素在排序后数组中的位置。

3. **构建结果数组**：
   - 根据累加计数数组，将原数组的元素放到正确的位置，构建排序后的数组。

### 计数排序的步骤

1. **找出数组中的最大值和最小值**（以处理数组中的负数）：

   - 确定计数数组的大小。

2. **填充计数数组**：

   - 统计每个元素在原数组中的出现次数。

3. **累加计数数组**：

   - 将计数数组转换为累加计数数组，以确定每个元素的位置。

4. **构建结果数组**：
   - 根据累加计数数组，将元素放置在结果数组的正确位置。

### 计数排序的代码实现

下面是一个 JavaScript 实现的计数排序，并且每一行都有注释解释：

```javascript
function countSort(arr) {
  // 找出数组中的最大值和最小值
  const max = Math.max(...arr)
  const min = Math.min(...arr)

  // 创建一个计数数组，长度为最大值减最小值加1，初始值为0
  const countArr = new Array(max - min + 1).fill(0)

  // 填充计数数组，统计每个元素在原数组中的出现次数
  for (let i = 0; i < arr.length; i++) {
    countArr[arr[i] - min]++
  }

  // 修改计数数组，使其记录每个元素的最终位置
  for (let i = 1; i < countArr.length; i++) {
    countArr[i] += countArr[i - 1]
  }

  // 创建结果数组
  const result = new Array(arr.length)

  // 构建结果数组，根据计数数组将元素放置在正确的位置
  for (let i = arr.length - 1; i >= 0; i--) {
    result[countArr[arr[i] - min] - 1] = arr[i]
    countArr[arr[i] - min]--
  }

  // 返回结果数组
  return result
}

// 示例调用
const array = [4, 2, 2, 8, 3, 3, 1]
console.log(countSort(array)) // 输出: [1, 2, 2, 3, 3, 4, 8]
```

### 代码解释

1. **`const max = Math.max(...arr); const min = Math.min(...arr);`**：

   - 找出数组中的最大值和最小值，以处理数组中的负数。

2. **`const countArr = new Array(max - min + 1).fill(0);`**：

   - 创建一个计数数组，长度为最大值减最小值加 1，初始值为 0。

3. **`for (let i = 0; i < arr.length; i++) { countArr[arr[i] - min]++; }`**：

   - 填充计数数组，统计每个元素在原数组中的出现次数。

4. **`for (let i = 1; i < countArr.length; i++) { countArr[i] += countArr[i - 1]; }`**：

   - 修改计数数组，使其记录每个元素的最终位置。

5. **`const result = new Array(arr.length);`**：

   - 创建结果数组。

6. **`for (let i = arr.length - 1; i >= 0; i--) { ... }`**：

   - 构建结果数组，根据计数数组将元素放置在正确的位置。

7. **`result[countArr[arr[i] - min] - 1] = arr[i]; countArr[arr[i] - min]--;`**：

   - 根据计数数组，将元素放置在正确的位置，并更新计数数组。

8. **`return result;`**：
   - 返回结果数组。

### 时间复杂度

计数排序的时间复杂度为 \(O(n + k)\)，其中 \(n\) 是数组的长度，\(k\) 是数组中元素的范围。

### 空间复杂度

计数排序的空间复杂度为 \(O(n + k)\)，需要额外的空间来存储计数数组和结果数组。

### 总结

- **核心思想**：通过计数和累加计数，确定每个元素在排序后数组中的位置。
- **时间复杂度**：\(O(n + k)\)。
- **空间复杂度**：\(O(n + k)\)。

计数排序是一种高效的排序算法，适用于整数或可离散化的元素，并且在元素范围相对较小时非常高效。与比较排序算法相比，它的性能更加稳定，不受数据分布影响。
