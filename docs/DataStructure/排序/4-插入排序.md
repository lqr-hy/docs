# 插入排序

插入排序（Insertion Sort）是一种简单直观的排序算法，适用于少量数据的排序。它的核心思想是将数组分成已排序和未排序两部分，通过将未排序部分的元素逐个插入到已排序部分的适当位置，从而达到排序的目的。

### 插入排序的核心思想

1. **分割数组**：

   - 将数组分成两部分：左边的部分是已经排序好的序列，右边的部分是未排序的序列。
   - 初始时，已排序部分只有一个元素（第一个元素），其本身是有序的。

2. **逐个插入**：

   - 从第二个元素开始，依次将未排序的元素插入到已排序的部分中。
   - 对于每一个未排序的元素，从后向前扫描已排序的部分，找到合适的位置进行插入。

3. **比较和交换**：
   - 在扫描已排序部分时，如果当前元素大于要插入的元素，则将当前元素向后移动一位，腾出位置给要插入的元素。
   - 重复上述步骤，直到找到比要插入的元素小的位置，然后将要插入的元素放到这个位置。

### 插入排序算法的步骤

1. 从第一个元素开始，认为它是已经排序好的。
2. 取下一个元素，在已经排序的元素序列中从后向前扫描。
3. 如果已经排序的元素大于新元素，则将已经排序的元素向后移一位。
4. 重复步骤 3，直到找到已排序的元素小于或等于新元素的位置。
5. 将新元素插入到该位置。
6. 重复步骤 2-5，直到所有元素均已排序。

### 插入排序的代码实现

下面是一个 JavaScript 实现的插入排序，并且每一行都有注释解释：

```javascript
function insertionSort(arr) {
  // 从第二个元素开始，因为第一个元素已经被认为是有序的
  for (let i = 1; i < arr.length; i++) {
    let key = arr[i] // 保存当前要插入的元素
    let j = i - 1

    // 从已经排序的序列中从后向前扫描，找到要插入的位置
    while (j >= 0 && arr[j] > key) {
      arr[j + 1] = arr[j] // 如果当前元素大于key，将当前元素后移一位
      j--
    }
    arr[j + 1] = key // 将key插入到合适的位置
  }
  return arr // 返回排序后的数组
}

// 示例调用
const array = [12, 11, 13, 5, 6]
console.log(insertionSort(array)) // 输出: [5, 6, 11, 12, 13]
```

### 代码解释

1. **`for (let i = 1; i < arr.length; i++)`**：

   - 从数组的第二个元素开始遍历（索引为 1），因为第一个元素（索引为 0）已经被认为是有序的。

2. **`let key = arr[i];`**：

   - 保存当前要插入的元素 `key`。

3. **`let j = i - 1;`**：

   - `j` 指向已排序部分的最后一个元素。

4. **`while (j >= 0 && arr[j] > key)`**：

   - 从已排序部分的最后一个元素开始，向前扫描，直到找到比 `key` 小的元素。
   - 如果当前元素 `arr[j]` 大于 `key`，则将 `arr[j]` 后移一位。

5. **`arr[j + 1] = arr[j];`**：

   - 将 `arr[j]` 后移一位，以腾出位置给 `key`。

6. **`arr[j + 1] = key;`**：
   - 将 `key` 插入到合适的位置，即插入到 `arr[j + 1]`。

### 总结

插入排序的核心思想是通过逐个插入未排序部分的元素到已排序部分，从而实现排序。它的主要特点是简单易懂，适用于小规模数据的排序。虽然在最坏情况下时间复杂度为 \(O(n^2)\)，但在元素基本有序时表现非常高效，最优情况下时间复杂度为 \(O(n)\)。
