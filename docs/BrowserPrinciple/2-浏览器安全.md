# 浏览器安全

### 1、什么是 `XSS` 攻击

`XSS` 攻击指的是跨站脚本攻击 是一种代码注入攻击 执行恶意脚本 盗取用户信息
`XSS` 的本质是因为网站没有对恶意代码进行过滤导致浏览器没办法分辨哪些脚本是可信的 从而导致恶意代码

#### 1、攻击方式:

> - 获取页面的数据 DOM Cookie LocalStorage
> - DOS 攻击 发送合理请求 占用服务器资源 从而使用户无法访问服务器
> - 破坏页面结构
> - 流量劫持 将链接指向某网站

#### 2、攻击类型

> - 存储型 指的是恶意脚本会存储在目标服务器上 当浏览器请求数据是 脚本从服务器传回执行
> - 反射型 指攻击者诱导用户访问一个带有恶意代码的 URL 后 服务器端接收到数据后处理然后吧恶意代码的数据发送到浏览器端 浏览器端解析带有 XSS 代码的数据后当作脚本执行
> - DOM 型 指修改页面的 DOM 节点形成 XSS

:::info 存储型和反射型的区别
存储型的恶意代码存在数据库里

反射型的恶意代码存在 URL 里
:::

#### 3、如何防御 `XSS`

> - 输入验证和过滤：对于用户输入的数据，进行验证和过滤，确保只允许符合预期的数据通过。可以使用一些库或框架提供的函数来过滤特殊字符、标签或脚本，例如将 < 转义为 &lt;。
> - 输出编码：在将用户输入的数据插入到页面中时，确保对数据进行正确的编码，防止浏览器将其解析为脚本。可以使用合适的编码函数，如 encodeURIComponent、encodeURI 或 HTML 编码函数 htmlspecialchars。
> - Content Security Policy (CSP)：使用 CSP 头部在服务器端设置策略，限制页面加载的资源和执行的脚本。CSP 可以防止恶意脚本的注入和执行。
> - 输入输出分离：将用户输入的数据和页面输出的内容分开处理。不要将用户输入的数据直接插入到页面中，而是存储在服务器端，然后通过安全的方式将其取回并插入到页面中。

### 2、什么是 `CSRF` 攻击

`CSRF` 指的是跨站请求伪造攻击 本质是利用 cookie 会在同源请求中携带发送给服务器的特点 以此来实现用户的冒充

#### 1、攻击类型

> - 表单提交攻击：攻击者构造一个恶意网站，在其中包含一个自动提交的表单，表单的目标地址指向目标网站。当受害者访问恶意网站时，表单会自动提交并执行相应的操作，如修改密码、发起支付请求等。
> - 图片或链接引用攻击：攻击者在恶意网站中嵌入一个图片或链接标签，其中的 URL 指向目标网站的敏感操作，当受害者访问恶意网站并加载了图片或点击了链接时，实际上触发了目标网站的操作。
> - GET 请求攻击：攻击者构造一个恶意的 URL，将包含恶意操作的参数附加在 URL 上，并诱使受害者点击或访问该 URL。当受害者点击了恶意 URL，浏览器会自动发送 GET 请求，并执行相应的操作。
> - CSRF 跨域攻击：攻击者在一个域名下的网站上，利用受害者在另一个域名下的网站上已登录的身份，发起对目标网站的 CSRF 攻击。

#### 2、如何防御 `CSRF`

> - 使用 CSRF Token：在表单中添加一个随机生成的 CSRF Token，服务器验证请求时需要验证该 Token，确保请求是合法的。
> - 检查 Referer 头：服务器可以检查请求的 Referer 头部，确保请求来源于合法的网站。
> - 添加验证码：对于敏感操作，可以添加验证码来增加验证的安全性。
> - 使用 SameSite Cookie 属性：设置 Cookie 的 SameSite 属性为 Strict 或 Lax，限制 Cookie 的跨域传递。
> - 避免使用 GET 请求进行敏感操作：对于修改、删除等敏感操作，应该使用 POST、PUT 或 DELETE 请求，避免使用 GET 请求，以降低 CSRF 攻击的风险。

### 3、什么是网络劫持

网络劫持是指攻击者干扰网络通信流量，篡改、截获或重定向网络数据的行为，从而获取或修改通信内容

#### 1、攻击类型

> - DNS 劫持：攻击者通过篡改 DNS 服务器的响应，将域名解析到错误的 IP 地址，使用户访问的网站被重定向到恶意或伪装的网站。
> - ARP 劫持：攻击者通过发送伪造的 ARP（Address Resolution Protocol）响应，将合法的 IP 地址与错误的 MAC 地址关联，使网络通信发生错乱或被截获。
> - HTTP 劫持：攻击者通过篡改 HTTP 请求或响应，修改网页内容或注入恶意代码，使用户在浏览器中看到伪造的网页或进行非法操作。
> - HTTPS 劫持：攻击者通过欺骗用户安装根证书或篡改证书链，使 HTTPS 通信的加密连接被中间人攻击，攻击者可以截获、查看或修改通信内容。
> - Wi-Fi 劫持：攻击者通过设置恶意的 Wi-Fi 访问点，欺骗用户连接到它并截获用户的通信数据。

#### 2、如何防御

> - 使用可靠的 DNS 服务器，并及时更新操作系统和浏览器的安全补丁。
> - 使用 HTTPS 加密通信，确保通信数据的安全性。
> - 尽量避免使用公共 Wi-Fi 网络，尤其是访问敏感信息时。
> - 定期检查网络设备的安全设置，并采取合适的防火墙和安全策略。
> - 使用安全的网络协议和加密算法，避免明文传输敏感信息。
