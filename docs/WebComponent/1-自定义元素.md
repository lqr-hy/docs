# Web Components

Web Components 是一组允许开发者创建可重用、封装化 HTML 元素的技术标准。它们使得开发者能够定义自定义元素并将其用作 Web 应用的构建模块。

1. **Custom Elements**：定义和使用自定义的 HTML 元素。
2. **Shadow DOM**：将自定义元素的内部 DOM 与外部 DOM 隔离，防止样式和脚本冲突。
3. **HTML Templates**：定义可复用的 HTML 模板。
4. **ES Modules**：使用 JavaScript 模块来组织代码（尽管这不是 Web Components 的一部分，但通常与之一起使用）。

### Web Components 示例

以下是一个简单的示例，展示了如何创建和使用 Web Components。

#### 1. 创建 Custom Element

首先，我们定义一个自定义元素 `<my-element>`，它将显示一个简单的消息。

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Web Components Example</title>
  </head>
  <body>
    <my-element></my-element>

    <script>
      class MyElement extends HTMLElement {
        constructor() {
          super()
          // Attach a shadow DOM tree to this instance
          const shadowRoot = this.attachShadow({ mode: 'open' })

          // Create elements
          const wrapper = document.createElement('span')
          wrapper.textContent = 'Hello, Web Components!'

          // Append elements to shadow DOM
          shadowRoot.appendChild(wrapper)
        }
      }

      // Define the new element
      customElements.define('my-element', MyElement)
    </script>
  </body>
</html>
```

在上面的代码中，我们定义了一个名为 `MyElement` 的类，继承自 `HTMLElement`。在构造函数中，我们创建了一个 Shadow DOM 并将一个 `<span>` 元素附加到 Shadow DOM 中。最后，我们使用 `customElements.define` 将自定义元素与类关联起来。

#### 2. 使用 Shadow DOM 隔离样式

我们可以在自定义元素中使用 Shadow DOM 来隔离样式，使其不会影响到页面上的其他部分。

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Web Components Example</title>
    <style>
      span {
        color: red;
      }
    </style>
  </head>
  <body>
    <my-element></my-element>

    <script>
      class MyElement extends HTMLElement {
        constructor() {
          super()
          const shadowRoot = this.attachShadow({ mode: 'open' })

          const wrapper = document.createElement('span')
          wrapper.textContent = 'Hello, Web Components!'

          const style = document.createElement('style')
          style.textContent = `
          span {
            color: blue;
            font-weight: bold;
          }
        `

          shadowRoot.appendChild(style)
          shadowRoot.appendChild(wrapper)
        }
      }

      customElements.define('my-element', MyElement)
    </script>
  </body>
</html>
```

在上面的示例中，我们在 Shadow DOM 内部添加了样式，这些样式仅应用于 Shadow DOM 内的元素，而不会影响到页面上的其他元素。

#### 3. 使用 HTML Templates

HTML Templates 允许我们定义可复用的 HTML 片段。

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Web Components Example</title>
  </head>
  <body>
    <template id="my-template">
      <style>
        span {
          color: green;
          font-weight: bold;
        }
      </style>
      <span>Hello, Template!</span>
    </template>

    <my-element></my-element>

    <script>
      class MyElement extends HTMLElement {
        constructor() {
          super()
          const shadowRoot = this.attachShadow({ mode: 'open' })

          // Get the template
          const template = document.getElementById('my-template').content

          // Clone the template content and append it to the shadow DOM
          shadowRoot.appendChild(template.cloneNode(true))
        }
      }

      customElements.define('my-element', MyElement)
    </script>
  </body>
</html>
```

在这个示例中，我们定义了一个 `<template>` 元素，其中包含一些样式和内容。在自定义元素的构造函数中，我们克隆了模板内容并将其附加到 Shadow DOM 中。

### 总结

Web Components 提供了一种标准化的方式来创建可重用的、封装化的 HTML 元素。通过使用 Custom Elements、Shadow DOM 和 HTML Templates，开发者可以创建高度模块化和可维护的 Web 应用
